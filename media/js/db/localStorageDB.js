var localStorageDB=(function(){function saveValue(a,b,c){var d=a+(b|0);var e={};e.value=c|0;e.dateTime=JS_DateTime();var f=[];if(br.storage.get(d))f=br.storage.get(d);f.push(e);br.storage.set((d),f)};function loadValue(a,b){var c=a+(b|0);return br.storage.get(c)};function isNewValue(a,b,c){var d=false;var e=loadValue(a,b);if(e.length<1)d=true;else{if(e[length-1]==undefined)d=true;else d=(e[length-1].value|0)==(c|0)}return d};function saveAllValues(a,b,c){var d=0;for(var i=0;i<b.length;i++){if(isNewValue(b[i]),c[i])d++}if(d>1){notice("Обнаружены "+d+" изменений в "+a+".\nСохранено "+b.length+" записей.");for(var i=0;i<b.length;i++){saveValue(a,b[i],c[i])}}else(notice("В "+a+" не зафиксировано изменений.");)};return{saveValue:saveValue,loadValue:loadValue,isNewValue:isNewValue,saveAllValues:saveAllValues}})();