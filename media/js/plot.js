var dContainers=[];var dTag=[];var dFull=[];var dShort=[];var dAdvId=[];function makePlot(g,h,j,k,l){g.html('<u>'+g.text()+'</u>');dContainers.push($('<div></div>'));dTag.push(h);dFull.push(k);dShort.push(l);dAdvId.push(j);g.children().attr("plotId",dContainers.length-1);$(dContainers[dContainers.length-1]).html('<div id="container'+h+'" style="min-width: 400px; height: 400px; margin: 0 auto"></div>').dialog({autoOpen:false,width:'80%',buttons:{"Закрыть":function(){$(this).dialog("close")}}});g.children().one("click",function(){var a=$(this).attr('plotId');dContainers[a].dialog('open');var b=dTag[a];var c=[];var d=localStorageDB.loadValue(dTag[a],dAdvId[a]);for(var i=0;i<d.length;i++){var e=d[i].d.split(" ")[0].split("/");c.push([Date.UTC(e[0],e[1]*1-1,e[2]),d[i].v])}var f=new Highcharts.Chart({chart:{renderTo:'container'+b,type:'spline'},title:{text:dFull[a]},subtitle:{text:'данные загружены из локального хранилища'},xAxis:{type:'datetime',dateTimeLabelFormats:{month:'%e. %b',year:'%b'}},yAxis:{title:{text:dShort[a]},min:0},tooltip:{formatter:function(){return'<b>'+this.series.name+'</b><br/>'+Highcharts.dateFormat('%e. %b',this.x)+':'+dShort[a]+' '+this.y+''}},series:[{name:dShort[a],data:c}]});return false})}